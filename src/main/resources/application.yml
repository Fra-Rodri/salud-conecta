# ============================================================================
# CONFIGURACIÓN DE SPRING BOOT - SaludConecta
# ============================================================================
#
# Este archivo contiene la configuración principal de la aplicación.
# Spring Boot lo lee automáticamente al arrancar.
#
# ⚠️ DATOS SENSIBLES - IMPORTANTE:
# ---------------------------------
# Para proteger credenciales (contraseñas, tokens), crea un archivo:
#   src/main/resources/application-dev.yml
#
# En ese archivo, sobrescribe SOLO las propiedades sensibles, por ejemplo:
#
#   spring:
#     datasource:
#       password: tu_password_real
#     mail:
#       password: tu_app_password_gmail
#
# Luego activa el perfil 'dev' al ejecutar:
#   mvn spring-boot:run -Dspring-boot.run.profiles=dev
#   o en IntelliJ: Run Configuration > Active profiles: dev
#
# El archivo application-dev.yml ya está en .gitignore y NO se subirá al repo.
#
# ============================================================================

spring:
  # Nombre de la aplicación (aparece en logs, actuator, etc.)
  application:
    name: SaludConecta

  # -------------------------------------------------------------------------
  # DATASOURCE: Configuración de conexión a la base de datos PostgreSQL
  # -------------------------------------------------------------------------
  # Spring Boot usa estas propiedades para crear el DataSource automáticamente.
  # El pool de conexiones por defecto es HikariCP (incluido en spring-boot-starter-jdbc).
  datasource:
    # URL JDBC de PostgreSQL (formato: jdbc:postgresql://host:puerto/nombre_bd)
    url: jdbc:postgresql://localhost:5432/saludconectadb
    
    # Usuario de la base de datos
    # ⚠️ Sobrescribir en application-dev.yml con usuario real
    username: usuario_ejemplo
    
    # Contraseña del usuario
    # ⚠️ NUNCA poner aquí credenciales reales - usar application-dev.yml
    password: 
    
    # Driver JDBC de PostgreSQL (debe estar en el classpath vía dependencia)
    driver-class-name: org.postgresql.Driver

  # -------------------------------------------------------------------------
  # jOOQ: Configuración del dialecto SQL
  # -------------------------------------------------------------------------
  # jOOQ necesita saber qué dialecto SQL usar para generar consultas correctas.
  # Opciones comunes: POSTGRES, MYSQL, H2, ORACLE, etc.
  jooq:
    sql-dialect: POSTGRES

  # -------------------------------------------------------------------------
  # SECURITY (comentado): Usuario por defecto para Spring Security
  # -------------------------------------------------------------------------
  # Si descomentas esto, Spring Security usa estas credenciales para login básico.
  # En producción, usa autenticación con BD (UserDetailsService personalizado).
  # security:
  #   user:
  #     name: user
  #     password: user

  # -------------------------------------------------------------------------
  # MAIL: Configuración SMTP para envío de correos electrónicos
  # -------------------------------------------------------------------------
  # Spring Boot Mail usa JavaMail para enviar emails (requiere spring-boot-starter-mail).
  # Configuración para Gmail (también funciona con otros proveedores SMTP).
  mail:
    # Servidor SMTP de Gmail (para otros proveedores, cambiar host/puerto)
    host: smtp.gmail.com
    
    # Puerto SMTP con STARTTLS (587). Para SSL usa puerto 465.
    port: 587
    
    # Cuenta de correo que envía los emails
    # ⚠️ Sobrescribir en application-dev.yml con tu email real
    username: tu_email@ejemplo.com
    
    # Contraseña de aplicación de Gmail (NO la contraseña de la cuenta)
    # Para Gmail: generar "App Password" en: https://myaccount.google.com/apppasswords
    # ⚠️ NUNCA poner aquí contraseña real - usar application-dev.yml
    password: 
    
    # Propiedades adicionales de JavaMail para autenticación y cifrado
    properties:
      mail:
        smtp:
          # Habilitar autenticación SMTP (usuario/contraseña requeridos)
          auth: true
          
          # Habilitar cifrado STARTTLS (upgrade de conexión no segura a TLS)
          starttls:
            enable: true
        
        # Modo debug: imprime detalles de la comunicación SMTP en logs (útil para depurar)
        # ⚠️ Desactivar en producción (expone información sensible en logs)
        debug: true

# ============================================================================
# LOGGING: Configuración de niveles de log
# ============================================================================
# Spring Boot usa Logback por defecto. Aquí ajustamos qué tan verbosos son los logs.
# Niveles: TRACE < DEBUG < INFO < WARN < ERROR < OFF
logging:
  level:
    # Log detallado de Spring Mail (útil para depurar envío de correos)
    "[org.springframework.mail]": DEBUG
    
    # Log detallado de Jakarta Mail (protocolo SMTP, conexiones, errores)
    "[jakarta.mail]": DEBUG

